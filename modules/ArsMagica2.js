importPackage(Packages.am2.spell);

//name table
var nameTable = new Names();
nameTable.add("airsled", "air_sled");
nameTable.add("airsled", "AirSled");
nameTable.add("amspawnegg", "AMSpawnEgg");
nameTable.add("arcanespellbook", "arcane_spellbook");
nameTable.add("arcanecompendium", "ArcaneCompendium");
nameTable.add("arcanedeconstructor", "arcaneDeconstructor");
nameTable.add("armorinfuser", "armorInfuser");
nameTable.add("astralbarrier", "astralBarrier");
nameTable.add("aum", "Aum");
nameTable.add("battlechicken", "BattleChicken");
nameTable.add("battlemagearmor", "battlemageArmor");
nameTable.add("battlemageboots", "battlemageBoots");
nameTable.add("battlemagehood", "battlemageHood");
nameTable.add("battlemageleggings", "battlemageLeggings");
nameTable.add("bindingcatalyst", "bindingCatalyst");
nameTable.add("blackaurem", "blackAurem");
nameTable.add("blockarcanereconstructor", "blockArcaneReconstructor");
nameTable.add("blocklectern", "blockLectern");
nameTable.add("bluechalk", "blueChalk");
nameTable.add("blueorchid", "blueOrchid");
nameTable.add("bookaffinity", "bookAffinity");
nameTable.add("bossairguardian", "BossAirGuardian");
nameTable.add("bossarcaneguardian", "BossArcaneGuardian");
nameTable.add("bossearthguardian", "BossEarthGuardian");
nameTable.add("bossfireguardian", "BossFireGuardian");
nameTable.add("bosslifeguardian", "BossLifeGuardian");
nameTable.add("bosslightningguardian", "BossLightningGuardian");
nameTable.add("bossnatureguardian", "BossNatureGuardian");
nameTable.add("bosswaterguardian", "BossWaterGuardian");
nameTable.add("bosswinterguardian", "BossWinterGuardian");
nameTable.add("boundaxenor", "BoundAxeNor");
nameTable.add("boundpickaxenor", "BoundPickaxeNor");
nameTable.add("boundshovelnor", "BoundShovelNor");
nameTable.add("boundswordnor", "BoundSwordNor");
nameTable.add("brokenlinkblock", "brokenLinkBlock");
nameTable.add("calefactor", "calefactor");
nameTable.add("candle", "candle");
nameTable.add("celestialprism", "celestialPrism");
nameTable.add("chargefocus", "chargeFocus");
nameTable.add("cowhorn", "cowHorn");
nameTable.add("craftingaltar", "CraftingAltar");
nameTable.add("creaturefocus", "creatureFocus");
nameTable.add("crystalphylactery", "Crystal Phylactery");
nameTable.add("crystalwrench", "crystal_wrench");
nameTable.add("crystalmarker", "crystalMarker");
nameTable.add("dabroom", "DaBroom");
nameTable.add("deficitcrystal", "deficitCrystal");
nameTable.add("desertnova", "desertNova");
nameTable.add("eartharmor", "earth_armor");
nameTable.add("earthelemental", "EarthElemental");
nameTable.add("elementalattuner", "elementalAttuner");
nameTable.add("enderboots", "enderBoots");
nameTable.add("epicmanapotion", "epicManaPotion");
nameTable.add("essence", "essence");
nameTable.add("essencebag", "essenceBag");
nameTable.add("essenceconduit", "essenceConduit");
nameTable.add("essencerefiner", "essenceRefiner");
nameTable.add("everstone", "everstone");
nameTable.add("evilbook", "evilBook");
nameTable.add("fireears", "fire_ears");
nameTable.add("flicker", "Flicker");
nameTable.add("flickerfocus", "flickerFocus");
nameTable.add("flickerjar", "flickerJar");
nameTable.add("flickerlure", "flickerLure");
nameTable.add("goldinlay", "goldInlay");
nameTable.add("greaterfocus", "greaterFocus");
nameTable.add("greatermanapotion", "greaterManaPotion");
nameTable.add("hellcow", "HellCow");
nameTable.add("illusionblock", "illusionBlock");
nameTable.add("inertspawner", "inertSpawner");
nameTable.add("inscriptiontable", "InscriptionTable");
nameTable.add("inscriptionupgrade", "inscriptionUpgrade");
nameTable.add("invisibleutility", "invisibleUtility");
nameTable.add("ironinlay", "ironInlay");
nameTable.add("itemfocus", "itemFocus");
nameTable.add("itemore", "itemOre");
nameTable.add("keystone", "keystone");
nameTable.add("keystonechest", "keystoneChest");
nameTable.add("keystonedoor", "keystoneDoor");
nameTable.add("keystonedoorplacer", "keystoneDoorPlacer");
nameTable.add("keystonereceptacle", "keystoneReceptacle");
nameTable.add("keystonetrapdoor", "keystoneTrapDoor");
nameTable.add("legendarymanapotion", "legendaryManaPotion");
nameTable.add("lesserfocus", "lesserFocus");
nameTable.add("lessermanapotion", "lesserManaPotion");
nameTable.add("lifeward", "lifeWard");
nameTable.add("lightningcharm", "lightningCharm");
nameTable.add("liquidessence", "liquidEssence");
nameTable.add("liquidessencebottle", "liquidEssenceBottle");
nameTable.add("liquidessencebucket", "liquidEssenceBucket");
nameTable.add("magearmor", "mageArmor");
nameTable.add("mageboots", "mageBoots");
nameTable.add("magehood", "mageHood");
nameTable.add("mageleggings", "mageLeggings");
nameTable.add("magetorch", "mageTorch");
nameTable.add("magicbroom", "magicBroom");
nameTable.add("magiciansworkbench", "magiciansWorkbench");
nameTable.add("magicwall", "magicWall");
nameTable.add("magitechgoggles", "magitechGoggles");
nameTable.add("magitechstaff", "magitechStaff");
nameTable.add("manabattery", "manaBattery");
nameTable.add("manacake", "manaCake");
nameTable.add("manafocus", "manaFocus");
nameTable.add("manamartini", "manaMartini");
nameTable.add("manapotionbundle", "manaPotionBundle");
nameTable.add("manavortex", "ManaVortex");
nameTable.add("mobdarkling", "MobDarkling");
nameTable.add("mobdarkmage", "MobDarkMage");
nameTable.add("mobdryad", "MobDryad");
nameTable.add("mobfireelemental", "MobFireElemental");
nameTable.add("mobfocus", "mobFocus");
nameTable.add("mobhecate", "MobHecate");
nameTable.add("moblightmage", "MobLightMage");
nameTable.add("mobmagevillager", "MobMageVillager");
nameTable.add("mobmanacreeper", "MobManaCreeper");
nameTable.add("mobmanaelemental", "MobManaElemental");
nameTable.add("mobwaterelemental", "MobWaterElemental");
nameTable.add("naturescythe", "natureScythe");
nameTable.add("obelisk", "obelisk");
nameTable.add("occulus", "occulus");
nameTable.add("otherworldaura", "otherworldAura");
nameTable.add("particleemitter", "ParticleEmitter");
nameTable.add("plankswitchwood", "planksWitchwood");
nameTable.add("playerfocus", "playerFocus");
nameTable.add("playerjournal", "playerjournal");
nameTable.add("redstoneinlay", "redstoneInlay");
nameTable.add("riftstorage", "RiftStorage");
nameTable.add("rune", "rune");
nameTable.add("runebag", "runeBag");
nameTable.add("saplingwitchwood", "saplingWitchwood");
nameTable.add("seerstone", "seerStone");
nameTable.add("shadowhelper", "ShadowHelper");
nameTable.add("shockwave", "Shockwave");
nameTable.add("slipstreamgenerator", "slipstreamGenerator");
nameTable.add("spellbase", "spellBase");
nameTable.add("spellbook", "spellBook");
nameTable.add("spellcomponent", "SpellComponent");
nameTable.add("spellparchment", "spellParchment");
nameTable.add("spellprojectile", "SpellProjectile");
nameTable.add("spellrune", "SpellRune");
nameTable.add("stairswitchwood", "stairsWitchwood");
nameTable.add("standardfocus", "standardFocus");
nameTable.add("standardmanapotion", "standardManaPotion");
nameTable.add("summoner", "Summoner");
nameTable.add("tarmaroot", "TarmaRoot");
nameTable.add("thrownarm", "ThrownArm");
nameTable.add("thrownrock", "ThrownRock");
nameTable.add("thrownsickle", "ThrownSickle");
nameTable.add("vinteumore", "vinteumOre");
nameTable.add("vinteumtorch", "VinteumTorch");
nameTable.add("wakebloom", "wakebloom");
nameTable.add("wardingcandle", "wardingCandle");
nameTable.add("waterorbs", "water_orbs");
nameTable.add("whirlwind", "Whirlwind");
nameTable.add("winterarm", "winter_arm");
nameTable.add("witchwooddoubleslab", "witchwoodDoubleSlab");
nameTable.add("witchwoodleaves", "WitchwoodLeaves");
nameTable.add("witchwoodlog", "WitchwoodLog");
nameTable.add("witchwoodsingleslab", "witchwoodSingleSlab");
nameTable.add("wizardchalk", "wizardChalk");
nameTable.add("woodenleg", "woodenLeg");
nameTable.add("workbenchupgrade", "workbenchUpgrade");
nameTable.add("zonespell", "ZoneSpell");

var createMob = function(name){
	var n = nameTable.lookup(name);
	if (n != null)
		return worldedit.createMob(n, 'arsmagica2.');
	return null;
};

var createItem = function(name){
	var n = nameTable.lookup(name);
	if (n != null)
		return worldedit.createItem(n, 'arsmagica2');
	return null;
};

var createBlock = function(name){
	var n = nameTable.lookup(name);
	if (n != null)
		return worldedit.createBlock(n, 'arsmagica2');
	return null;
};

var skillManager = SkillManager.instance;
var spellUtils = SpellUtils.instance;

/*
function SpellItem(itemstack){
//	this.base = Item;
//	this.base(itemstack);
	Item.call(this, itemstack);
}

SpellItem.prototype.setIcon = function(icon){
	setDamage(icon);
};
*/

var createSpell = function(shape, components, modifiers){
	var spell = worldedit.createItem('spellBase', 'arsmagica2').getItemStack();
	
	var java_components = java.lang.reflect.Array.newInstance(java.lang.String, components.length);
	for(var i=0; i< components.length; i++) java_components[i] = components[i];
	
	var java_modifiers;
	if (modifiers == undefined){
		java_modifiers = java.lang.reflect.Array.newInstance(java.lang.String, 0);
	}
	else {
		java_modifiers = java.lang.reflect.Array.newInstance(java.lang.String, modifiers.length);
		for(var i=0; i< modifiers.length; i++) java_modifiers[i] = modifiers[i];
	}
	
	spellUtils.addSpellStageToScroll(spell, shape, java_components, java_modifiers);
	spellUtils.writeModVersionToStack(spell);
	
	return new Item(spellUtils.constructSpellStack(spell));
};

exports.createMob = createMob;
exports.createItem = createItem;
exports.createBlock = createBlock;

exports.createSpell = createSpell;


/*
//Shapes
"AoE"
"Beam"
"Binding"
"Chain"
"Channel"
"Projectile"
"Rune"
"Self"
"Summon"
"Touch"
"Zone"
"Contingency_Fall"
"Contingency_Damage"
"Contingency_Fire"
"Contingency_Health"
"Contingency_Death"
"Wall"
"Wave"

//Components
"Accelerate"
"AstralDistortion"
"Attract"
"BanishRain"
"Blind"
"Blink"
"ChronoAnchor"
"CreateWater"
"Dig"
"Disarm"
"Dispel"
"DivineIntervention"
"Drought"
"EnderIntervention"
"Entangle"
"FireDamage"
"Flight"
"Fling"
"Forge"
"Freeze"
"FrostDamage"
"GravityWell"
"Grow"
"HarvestPlants"
"Haste"
"Heal"
"Ignition"
"Invisibility"
"Knockback"
"Leap"
"Levitate"
"LifeDrain"
"LifeTap"
"Light"
"LightningDamage"
"MagicDamage"
"ManaDrain"
"Mark"
"NightVision"
"PhysicalDamage"
"Plant"
"Plow"
"RandomTeleport"
"Recall"
"Reflect"
"Regeneration"
"Repel"
"Rift"
"Shield"
"Slow"
"Slowfall"
"Storm"
"SwiftSwim"
"Telekinesis"
"Transplace"
"TrueSight"
"WaterBreathing"
"WateryGrave"
"Charm"
"MeltArmor"
"Drown"
"Blizzard"
"Daylight"
"FallingStar"
"FireRain"
"ManaLink"
"ManaShield"
"Moonrise"
"WizardsAutumn"
"Appropriation"
"Fury"
"Silence"
"ScrambleSynapses"
"PlaceBlock"
"Shrink"
"Nauseate"

//Modifiers
"Bounce"
"Speed"
"Gravity"
"Damage"
"Healing"
"VelocityAdded"
"Radius"
"Duration"
"RuneProcs"
"Range"
"Lunar"
"TargetNonSolid"
"Solar"
"Piercing"
"Colour"
"MiningPower"
"Prosperity"
"BuffPower"
"Dismembering"
"FeatherTouch"

//Skills
"AffinityGains"
"AugmentedCasting"
"ExtraSummon"
"MageBandI"
"MageBandII"
"ManaRegenI"
"ManaRegenII"
"ManaRegenIII"
"SpellMotion"
*/